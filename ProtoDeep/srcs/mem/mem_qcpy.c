#include "pd_main.h"

void    *pd_mem_qcpy_16(void *dst, void *src)
{
    pd_mem16       *s_buffer = (pd_mem16 *)src;
    pd_mem16       *d_buffer = (pd_mem16 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_32(void *dst, void *src)
{
    pd_mem32       *s_buffer = (pd_mem32 *)src;
    pd_mem32       *d_buffer = (pd_mem32 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_64(void *dst, void *src)
{
    pd_mem64       *s_buffer = (pd_mem64 *)src;
    pd_mem64       *d_buffer = (pd_mem64 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_128(void *dst, void *src)
{
    pd_mem128       *s_buffer = (pd_mem128 *)src;
    pd_mem128       *d_buffer = (pd_mem128 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_256(void *dst, void *src)
{
    pd_mem256       *s_buffer = (pd_mem256 *)src;
    pd_mem256       *d_buffer = (pd_mem256 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_512(void *dst, void *src)
{
    pd_mem512       *s_buffer = (pd_mem512 *)src;
    pd_mem512       *d_buffer = (pd_mem512 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_1024(void *dst, void *src)
{
    pd_mem1024       *s_buffer = (pd_mem1024 *)src;
    pd_mem1024       *d_buffer = (pd_mem1024 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_2048(void *dst, void *src)
{
    pd_mem2048       *s_buffer = (pd_mem2048 *)src;
    pd_mem2048       *d_buffer = (pd_mem2048 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_4096(void *dst, void *src)
{
    pd_mem4096       *s_buffer = (pd_mem4096 *)src;
    pd_mem4096       *d_buffer = (pd_mem4096 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_8192(void *dst, void *src)
{
    pd_mem8192       *s_buffer = (pd_mem8192 *)src;
    pd_mem8192       *d_buffer = (pd_mem8192 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_16384(void *dst, void *src)
{
    pd_mem16384       *s_buffer = (pd_mem16384 *)src;
    pd_mem16384       *d_buffer = (pd_mem16384 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_32768(void *dst, void *src)
{
    pd_mem32768       *s_buffer = (pd_mem32768 *)src;
    pd_mem32768       *d_buffer = (pd_mem32768 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_65536(void *dst, void *src)
{
    pd_mem65536       *s_buffer = (pd_mem65536 *)src;
    pd_mem65536       *d_buffer = (pd_mem65536 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_131072(void *dst, void *src)
{
    pd_mem131072       *s_buffer = (pd_mem131072 *)src;
    pd_mem131072       *d_buffer = (pd_mem131072 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_262144(void *dst, void *src)
{
    pd_mem262144       *s_buffer = (pd_mem262144 *)src;
    pd_mem262144       *d_buffer = (pd_mem262144 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_524288(void *dst, void *src)
{
    pd_mem524288       *s_buffer = (pd_mem524288 *)src;
    pd_mem524288       *d_buffer = (pd_mem524288 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_1048576(void *dst, void *src)
{
    pd_mem1048576       *s_buffer = (pd_mem1048576 *)src;
    pd_mem1048576       *d_buffer = (pd_mem1048576 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_2097152(void *dst, void *src)
{
    pd_mem2097152       *s_buffer = (pd_mem2097152 *)src;
    pd_mem2097152       *d_buffer = (pd_mem2097152 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_4194304(void *dst, void *src)
{
    pd_mem4194304       *s_buffer = (pd_mem4194304 *)src;
    pd_mem4194304       *d_buffer = (pd_mem4194304 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_8388608(void *dst, void *src)
{
    pd_mem8388608       *s_buffer = (pd_mem8388608 *)src;
    pd_mem8388608       *d_buffer = (pd_mem8388608 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_16777216(void *dst, void *src)
{
    pd_mem16777216       *s_buffer = (pd_mem16777216 *)src;
    pd_mem16777216       *d_buffer = (pd_mem16777216 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_33554432(void *dst, void *src)
{
    pd_mem33554432       *s_buffer = (pd_mem33554432 *)src;
    pd_mem33554432       *d_buffer = (pd_mem33554432 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_67108864(void *dst, void *src)
{
    pd_mem67108864       *s_buffer = (pd_mem67108864 *)src;
    pd_mem67108864       *d_buffer = (pd_mem67108864 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_134217728(void *dst, void *src)
{
    pd_mem134217728       *s_buffer = (pd_mem134217728 *)src;
    pd_mem134217728       *d_buffer = (pd_mem134217728 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_268435456(void *dst, void *src)
{
    pd_mem268435456       *s_buffer = (pd_mem268435456 *)src;
    pd_mem268435456       *d_buffer = (pd_mem268435456 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_536870912(void *dst, void *src)
{
    pd_mem536870912       *s_buffer = (pd_mem536870912 *)src;
    pd_mem536870912       *d_buffer = (pd_mem536870912 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_1073741824(void *dst, void *src)
{
    pd_mem1073741824       *s_buffer = (pd_mem1073741824 *)src;
    pd_mem1073741824       *d_buffer = (pd_mem1073741824 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_2147483648(void *dst, void *src)
{
    pd_mem2147483648       *s_buffer = (pd_mem2147483648 *)src;
    pd_mem2147483648       *d_buffer = (pd_mem2147483648 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    *pd_mem_qcpy_4294967296(void *dst, void *src)
{
    pd_mem4294967296       *s_buffer = (pd_mem4294967296 *)src;
    pd_mem4294967296       *d_buffer = (pd_mem4294967296 *)dst;
    *d_buffer = *s_buffer;
    return (NULL);
}

void    pd_mem_qcpy(void *dst, void *src, size_t len)
{
    if (len < 1024)
        pd_mem_cpy(dst, src, len);
    void *dst_tmp = dst;
    void *src_tmp = src;
    void *(*qcpy[29])(void *dst, void *src) = {
        pd_mem_qcpy_16,
        pd_mem_qcpy_32,
        pd_mem_qcpy_64,
        pd_mem_qcpy_128,
        pd_mem_qcpy_256,
        pd_mem_qcpy_512,
        pd_mem_qcpy_1024,
        pd_mem_qcpy_2048,
        pd_mem_qcpy_4096,
        pd_mem_qcpy_8192,
        pd_mem_qcpy_16384,
        pd_mem_qcpy_32768,
        pd_mem_qcpy_65536,
        pd_mem_qcpy_131072,
        pd_mem_qcpy_262144,
        pd_mem_qcpy_524288,
        pd_mem_qcpy_1048576,
        pd_mem_qcpy_2097152,
        pd_mem_qcpy_4194304,
        pd_mem_qcpy_8388608,
        pd_mem_qcpy_16777216,
        pd_mem_qcpy_33554432,
        pd_mem_qcpy_67108864,
        pd_mem_qcpy_134217728,
        pd_mem_qcpy_268435456,
        pd_mem_qcpy_536870912,
        pd_mem_qcpy_1073741824,
        pd_mem_qcpy_2147483648,
        pd_mem_qcpy_4294967296
    };
    for (size_t i = 32; i > 4; i--)
    {
        if ((len >> i))
        {
            if (qcpy[i - 4](dst_tmp, src_tmp))
                return;
            len -= (1 << i);
            dst_tmp += (1 << i);
            src_tmp += (1 << i);
            break;
        }
    }
    char *d = (char *)dst_tmp;
    char *s = (char *)src_tmp;
    for (size_t i = 0; i < len; i++)
        *d++ = *s++;
}